
<div>

<div class="modal-dialog">
    <form class="modal-content" action="" method="post">
        <div class="modal-header">
            <h5 class="modal-title" id="addNewModalLabel">Add new</h5>
            <button type="button" class="btn-close" (click)="close()" aria-label="Close"></button>
        </div>
        <div class="modal-body">   

                <div class="mb-3 d-inline-flex align-items-center">
                    <label class="mx-2 form-label" for="no-of-docs">No. of Doc(s)</label>
                    <input [(ngModel)]="numberOfDocs" class="form-control" required min="1" style="width: 150px;" type="number"
                        name="number-of-docs" id="number-of-docs" onclick="this.select()">
                    <div class="invalid-feedback">This field is required</div>
                </div> <!-- Number of docs -->

                <div class="mb-3 d-inline-flex align-items-center">
                    <label class="mx-2 form-label" for="no-of-items">No. of Item(s) Ordered</label>
                    <input [(ngModel)]="itemsOrdered" class="form-control" required min="1" style="width: 150px;" type="number"
                        name="number-of-items" id="number-of-items" onclick="this.select()">
                    <div class="invalid-feedback">This field is required</div>
                </div> <!-- Number of items ordered -->

                <p class="mb-3">Add out of stock item(s) below and indicate is subsitituted: </p>
        
                <table class="table table-striped bg-light">
                    <tr>
                        <th>#</th>
                        <th>Generic Description</th>
                        <th>BrandName</th>
                        <th>Subsitituted</th>
                        <th></th>
                    </tr>
                    @for (os of osList; track $index) {
                        
                        <tr>
                            <td>{{$index + 1}}</td>
                            <td class="text-wrap" style="width: 300px;">{{os.GenericDescription}}</td>
                            <td>{{os.BrandName ? os.BrandName : "Generic"}}</td>
                            <td><input type="checkbox" (change)="updateSubstitute($event)" name="" id=""></td>
                            <td><i title="Remove Row" role="banner" (click)="osList.splice($index,1)" id="deleteOs" class="bi bi-trash"></i></td>
                        </tr>
                    }
        
        
                </table> <!-- table of out of stock -->        
                <div class="dropdown">
                            <!-- Dropdown filter/ Search-->
                    <input id="searchbox"  class="dropdown-toggle form-control"  data-bs-toggle="dropdown"
                        autocomplete="false" placeholder="search and select os item(s)"
                        (input)="filterInventory()"
                        >
                    
                        <ul class="dropdown-menu" style="width:100%;height: 300px;overflow:auto;" aria-expanded="false">
                            @for (item of filteredInventory; track $index) {

                                <li class="dropdown-item " role="button" (click)="onInventoryDropdownClick(item)">
                                    <a>
                                        <span class="text-wrap" >{{item.Code + ' ' + item.GenericDescription}}</span> 
                                        <span >{{item.BrandName ? " " + item.BrandName : ""}}</span> 
                                    </a>
                                </li>                                                 
                            }                
                        
                            @if (invetoryFetching) {        
                                <li>Loading ...</li>
                            }
                    </ul><!-- Dropdown Menu -->
                </div><!--Dropdown-->           
            
        </div>
        <div class="modal-footer">
            @if (!saving) {
                <button type="button" (click)="save($event)" class="btn btn-primary">Save New</button>
            }
            @else {
                <button class="btn btn-primary" disabled="disabled">Saving ...</button>
            }
        </div>
    </form>
</div>

    <div class="app-modal-backdrop"></div>
</div>